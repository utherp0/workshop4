<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="author" content="[YOUR NAME] &lt;[YOUR EMAIL]&gt;">
<title>OpenShift 4.x DevEx Workshop</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>OpenShift 4.x DevEx Workshop</h1>
<div class="details">
<span id="author" class="author">[YOUR NAME]</span><br>
<span id="email" class="email">[YOUR EMAIL]</span><br>
<span id="revnumber">version 1.0.0,</span>
<span id="revdate">December 02, 2019</span>
<br><span id="revremark">Draft</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#intro">Introduction</a>
<ul class="sectlevel2">
<li><a href="#attendee-details">Attendee details</a>
<ul class="sectlevel3">
<li><a href="#what-is-openshift">What is Openshift</a></li>
<li><a href="#links">Links</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#application-concepts">Application Concepts</a>
<ul class="sectlevel2">
<li><a href="#starting-up-logging-on-and-creating-a-project">Starting up - logging on and creating a project</a></li>
<li><a href="#creating-your-first-application">Creating your first Application</a></li>
<li><a href="#adding-additional-applications">Adding additional Applications</a></li>
<li><a href="#interacting-with-openshift-through-the-command-line">Interacting with OpenShift through the Command Line</a></li>
<li><a href="#a-summary-of-application-interactions">A Summary of Application Interactions</a></li>
</ul>
</li>
<li><a href="#healthprobes">Pod Health Probes</a>
<ul class="sectlevel2">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#creating-the-project-and-application">Creating the project and application</a></li>
<li><a href="#viewing-the-running-application">Viewing the running application</a></li>
<li><a href="#liveness-probe">Liveness Probe</a>
<ul class="sectlevel3">
<li><a href="#activation-of-the-liveness-prove">Activation of the Liveness Prove</a></li>
</ul>
</li>
<li><a href="#readiness-probe">Readiness Probe</a>
<ul class="sectlevel3">
<li><a href="#activation-of-the-readiness-probe">Activation of the Readiness Probe</a></li>
<li><a href="#cleaning-up">Cleaning up</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#webconsole">Camel K on Openshift</a>
<ul class="sectlevel2">
<li><a href="#introduction-2">Introduction</a></li>
<li><a href="#create-a-new-project">Create a new project</a></li>
<li><a href="#camel-k-and-the-operator-lifecycle-manager">Camel K and the Operator Lifecycle Manager</a></li>
<li><a href="#download-and-configure-your-environment">Download and configure your environment</a></li>
<li><a href="#deploy-a-camel-k-interation">Deploy a Camel K Interation</a></li>
<li><a href="#deploy-camel-k-in-developer-mode">Deploy Camel K in Developer mode</a></li>
<li><a href="#optional-labs">Optional labs</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="intro"><a class="anchor" href="#intro"></a>Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="attendee-details"><a class="anchor" href="#attendee-details"></a>Attendee details</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-bottom"><div class="content"><div class="paragraph">
<p>Name:</p>
</div></div></td>
<td class="tableblock halign-left valign-bottom"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-bottom"><div class="content"><div class="paragraph">
<p>User ID (userX):</p>
</div></div></td>
<td class="tableblock halign-left valign-bottom"><div class="content"></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This workshop is designed to introduce Developers to <strong>OpenShift 4</strong> and explain the usage and technologies around it from a developer perspective.</p>
</div>
<div class="sect3">
<h4 id="what-is-openshift"><a class="anchor" href="#what-is-openshift"></a>What is Openshift</h4>
<div class="paragraph">
<p>Red Hat® OpenShift® is a hybrid cloud, enterprise, secure Kubernetes application platform.</p>
</div>
<div class="paragraph">
<p>OpenShift is a family of containerization software developed by Red Hat.
Its flagship product is the OpenShift Container Platform—an on-premises platform as a service built around OCI standard containers orchestrated and
managed by Kubernetes on a foundation of Red Hat Enterprise Linux.</p>
</div>
</div>
<div class="sect3">
<h4 id="links"><a class="anchor" href="#links"></a>Links</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.openshift.com/learn/what-is-openshift">https://www.openshift.com/learn/what-is-openshift</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/OpenShift">https://en.wikipedia.org/wiki/OpenShift</a></p>
</li>
<li>
<p><a href="https://www.openshift.com/products/container-platform">https://www.openshift.com/products/container-platform</a></p>
</li>
<li>
<p><a href="http://theconsole.blurgh.com">http://theconsole.blurgh.com</a> (the Web Console URL for the Workshop)
[[Application Basics]]</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="application-concepts"><a class="anchor" href="#application-concepts"></a>Application Concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="starting-up-logging-on-and-creating-a-project"><a class="anchor" href="#starting-up-logging-on-and-creating-a-project"></a>Starting up - logging on and creating a project</h3>
<div class="paragraph">
<p>Log on to cluster as userx, password openshift</p>
</div>
<div class="paragraph">
<p>Ensure you are on the Administrator View (top level, select Administrator)</p>
</div>
<div class="paragraph">
<p><strong>The Administrator view provides you with an extended functionality interface that allows you to deep dive into
the objects available to your user. The Developer view is an opinionated interface designed to ease the use of the system
for developers. This workshop will have you swapping between the contexts for different tasks.</strong></p>
</div>
<div class="paragraph">
<p>Click on 'Create Project'</p>
</div>
<div class="paragraph">
<p>Name - ‘sandboxX’ where x is user number</p>
</div>
<div class="paragraph">
<p>Display Name, Description are labels</p>
</div>
<div class="paragraph">
<p>When created click on 'Role Bindings'</p>
</div>
<div class="paragraph">
<p><strong>By default when you create a Project within OpenShift your user is given administration rights. This allows the user
to create any objects that they have rights to create and to change the security and access settings for the project
itself, i.e. add users as Administrators, Edit Access, Read access or disable other user&#8217;s abilities to even see
the project and the objects within.</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="creating-your-first-application"><a class="anchor" href="#creating-your-first-application"></a>Creating your first Application</h3>
<div class="paragraph">
<p>In the top left of the UI, where the label indicates the view mode, change the mode from Administrator to Developer</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/topic-applicationbasics-2.png" alt="Developer Context">
</div>
</div>
<div class="paragraph">
<p>Click 'Add'</p>
</div>
<div class="paragraph">
<p><strong>The Catalog screen for the developer combines all the ways components can be added into the Project. These are:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>From Git - this provides another way to do a Source-2-Image build by first choosing the Git repo and then the builder image to use</strong></p>
</li>
<li>
<p><strong>Container Image - this provides a way to directly deploy an Image from a repository</strong></p>
</li>
<li>
<p><strong>From Catalog - this allows the Developer to browse all available templates, which are predefined sets of Objects to create an application</strong></p>
</li>
<li>
<p><strong>From Dockerfile - this allows the Developer to do a controlled build of an Image from a Dockerfile</strong></p>
</li>
<li>
<p><strong>YAML - this allows the Developer to provide a set of populated YAML to define the objects to be added to the Project</strong></p>
</li>
<li>
<p><strong>Database - this allows the Developer to browse pre-created Database services to add to the Project</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Select ‘From Catalog’</p>
</div>
<div class="paragraph">
<p>Enter ‘node’ in the search box</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/topic-applicationbasics-1.png" alt="Node Choice">
</div>
</div>
<div class="paragraph">
<p><strong>OpenShift allows for multiple base images to be built upon - the selection of node searches for any images or templates registered into the system
with the label 'node'. In the screenshot above, and in the catalog you will be presented with, there will be a selection of base images.</strong></p>
</div>
<div class="paragraph">
<p>Select ‘Node.js’</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/topic-applicationbasics-3.png" alt="Node Choice">
</div>
</div>
<div class="paragraph">
<p><strong>When you select an option, in this case the Node.js builder one, you are presented with a wizard that shows you exactly what
components will be created as part of your Project. In this case, with Node.js, the template will create a build config, that will build the
Image that will contain your Application, an ImageStream which is the OpenShift representation of an Image, a deployment config, which defines exactly how the image
will be deployed as a running Container within the Project, a service which is the internal endpoint for the application within the Project and a route,
optionally, which will provide access to the Application for external consumers.</strong></p>
</div>
<div class="paragraph">
<p>Click on 'Create Application'</p>
</div>
<div class="paragraph">
<p><strong>This approach uses the OpenShift ''source-2-image'' concept, which is a controlled mechanism provided by OpenShift that automates the creation
of application images using a base image and a source repository.</strong></p>
</div>
<div class="paragraph">
<p>Change the Builder Image Version to 8</p>
</div>
<div class="paragraph">
<p><strong>The ''source-2-image'' approach allows you to use differing versions of a base image - in this case you can execute the Node build against a number of supported Node
versions.</strong></p>
</div>
<div class="paragraph">
<p>Git repo - <a href="https://github.com/utherp0/nodenews">https://github.com/utherp0/nodenews</a></p>
</div>
<div class="paragraph">
<p>In a separate browser tab go to <a href="https://github.com/utherp0/nodenews">https://github.com/utherp0/nodenews</a></p>
</div>
<div class="paragraph">
<p><strong>If you visit the URL you will see there is no OpenShift specific code in the repository at all.</strong></p>
</div>
<div class="paragraph">
<p>Close the github tab</p>
</div>
<div class="paragraph">
<p>Back at the OCP4.2 Ux leave the Application as ‘Create Application’.</p>
</div>
<div class="paragraph">
<p><strong>OpenShift 4 introduces the concept of Application Grouping. This allows a visualisation of multiple Applications in the same 'group', making visibility of the Application much
simpler.</strong></p>
</div>
<div class="paragraph">
<p>Ensure the application name is ‘nodenews-app’</p>
</div>
<div class="paragraph">
<p>Ensure the Name is ‘nodenews’</p>
</div>
<div class="paragraph">
<p>Ensure the ‘Create Route is checked’</p>
</div>
<div class="paragraph">
<p>Click 'Create'</p>
</div>
<div class="paragraph">
<p><strong>The Topology view is a new feature of OpenShift 4 that provides a dynamic and useful visualisation of all of your Applications in a given Project.</strong></p>
</div>
<div class="paragraph">
<p>Click on the Icon marked 'Node'</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/topic-applicationbasics-4.png" alt="Node Sidepanel">
</div>
</div>
<div class="paragraph">
<p><strong>The side-panel contains an overview of the Application you chose. In this case it will cover
the build. Once a build has completed this side panel shows the Pods that are running, the builds that have completed, the services
exported for the Application and the routes, if the Application has any.</strong></p>
</div>
<div class="paragraph">
<p>Wait for the Build to finish, the Pod to change from Container Creating to Running</p>
</div>
<div class="paragraph">
<p><strong>When an Application is created the Pod ring will be empty, indicating that an Application will appear once the build has completed. When the build
completes the Pod ring will switch to light blue, indicating the Pod is being pulled (the image is being pulled from the registry to the Node where the
Pod will land) and is starting (the Pod is physically in place but the Containers within it are not reporting as ready). Once the Pod is placed and running the colour
of the Pod ring will change to dark blue.</strong></p>
</div>
<div class="paragraph">
<p>Click on the Tick at the bottom left of the Pod</p>
</div>
<div class="paragraph">
<p><strong>If you scroll the log of the Build output you will see the steps that the build takes. This includes laying the foundational file layers for the base
image, performing the code specific build operations (in this case an ''npm install'') and then pushing the file layers for the image into the OpenShift
integrated registry.</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="adding-additional-applications"><a class="anchor" href="#adding-additional-applications"></a>Adding additional Applications</h3>
<div class="paragraph">
<p>Click on 'Topology'</p>
</div>
<div class="paragraph">
<p>Click 'Add'</p>
</div>
<div class="paragraph">
<p>Click 'From Catalog'</p>
</div>
<div class="paragraph">
<p>Search for ‘httpd’</p>
</div>
<div class="paragraph">
<p>Select the (httpd) template</p>
</div>
<div class="paragraph">
<p>Click on 'Create Application'</p>
</div>
<div class="paragraph">
<p>Leave Image Version as 2.4</p>
</div>
<div class="paragraph">
<p>Set the git repo to ‘https://github.com/utherp0/forumstaticassets’</p>
</div>
<div class="paragraph">
<p>Ensure the Application is ‘nodenews-app’</p>
</div>
<div class="paragraph">
<p>Ensure the name is forumstaticassets</p>
</div>
<div class="paragraph">
<p>Ensure the ‘Create a Route’ checkbox is clicked</p>
</div>
<div class="paragraph">
<p>Click 'Create'</p>
</div>
<div class="paragraph">
<p><strong>Note that the new Application icon appears within a bounded area on the Topology page labelled with the 'Application' chosen above. If you click on the area between the Pods you can move
the group as a single action.</strong></p>
</div>
<div class="paragraph">
<p>Click on the forumstaticassets Pod</p>
</div>
<div class="paragraph">
<p>Watch the build complete, the Container Creating and the Running event</p>
</div>
<div class="paragraph">
<p>Click 'Add'</p>
</div>
<div class="paragraph">
<p>Click 'From Catalog'</p>
</div>
<div class="paragraph">
<p>Search for ‘node’</p>
</div>
<div class="paragraph">
<p>Select ‘Node.js’</p>
</div>
<div class="paragraph">
<p>Click 'Create Application'</p>
</div>
<div class="paragraph">
<p>Leave at Builder Image Version 10</p>
</div>
<div class="paragraph">
<p>Set the git repo to ‘https://github.com/utherp0/ocpnode’</p>
</div>
<div class="paragraph">
<p>In the ‘Application’ pulldown select ‘Create Application</p>
</div>
<div class="paragraph">
<p>In the ‘Application Name’ enter ‘ocpnode-app’</p>
</div>
<div class="paragraph">
<p>Ensure the Name is ‘ocpnode’</p>
</div>
<div class="paragraph">
<p>Ensure the ‘Create Route’ is checked</p>
</div>
<div class="paragraph">
<p>Click 'Create'</p>
</div>
<div class="paragraph">
<p>Click on the ‘ocpnode’ Application in the topology - click on the ‘cross’ icon to centralise the topology</p>
</div>
<div class="paragraph">
<p><strong>Now we have created a new Application grouping you will see two ''cloud'' groupings, labelled with the appropriate Application name you entered.</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="interacting-with-openshift-through-the-command-line"><a class="anchor" href="#interacting-with-openshift-through-the-command-line"></a>Interacting with OpenShift through the Command Line</h3>
<div class="paragraph">
<p>Open another tab in the browser and go to the terminal app route (noted earlier)</p>
</div>
<div class="paragraph">
<p>Log on with the same user credentials as used for the Ux (i.e. userx and openshift)</p>
</div>
<div class="paragraph">
<p>When the terminal window renders type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc whoami</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensure the user listed is the user that was logged on</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc version</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc projects</code></pre>
</div>
</div>
<div class="paragraph">
<p>User should have access to one project, explain the ability to access multiple projects</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc project sandboxX</code></pre>
</div>
</div>
<div class="paragraph">
<p>User should now be using the sandboxX project created and configured earlier</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get users</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>There is a level of permission within the OpenShift system called ''Cluster Admin''. This permission allows a User to access *any</strong> of the objects on the
system regardless of Project. It is effectively a super-user and as such normal users do not normally have this level of access.*</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get pods</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>If you look carefully at the Pods shown you will notice there are additional Pods above and beyond the ones expected for your Applications. If you look at the state of
these Pods they will be marked as Completed. Everything in OpenShift is executed as a Pod, including Builds. These completed Pods are the Builds we have run so far.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get pods | grep Completed</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get pods | grep Running</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get dc</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>DC is an abbreviation for Deployment Config. These are Objects that directly define how an Application is deployed within OpenShift. This is the ''ops''
side of the OpenShift system. Deployment Configs are different to Kubernetes Deployments in that they are an extension and contain things such as Config Maps, Secrets,
Volume Mounts, labelled targetting of Nodes and the like.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc scale dc/nodenews --replicas=2</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="a-summary-of-application-interactions"><a class="anchor" href="#a-summary-of-application-interactions"></a>A Summary of Application Interactions</h3>
<div class="paragraph">
<p>Go back to the UI and make sure you are on Developer mode. Click on Topology.</p>
</div>
<div class="paragraph">
<p>Click on the ‘nodenews’ application</p>
</div>
<div class="paragraph">
<p>Note the ‘DC’ reference to the application under the icon</p>
</div>
<div class="paragraph">
<p>In the pop-up panel on the right click on 'Resources'</p>
</div>
<div class="paragraph">
<p>Note that there are two pods running with the application now</p>
</div>
<div class="paragraph">
<p>Change the mode from Developer to Administrator</p>
</div>
<div class="paragraph">
<p>Select the sandboxx project in the project list</p>
</div>
<div class="paragraph">
<p>Note the metrics for the project</p>
</div>
<div class="paragraph">
<p>Click on 'Workloads' and then select Pods.</p>
</div>
<div class="paragraph">
<p>Change to Developer mode and then select Topology if the Topology page isn’t already shown</p>
</div>
<div class="paragraph">
<p>Click and hold on the forumstaticassets Pod and drag it onto the ocpnode-app</p>
</div>
<div class="paragraph">
<p>Select ‘move’ when it prompts whether you want to move it</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="healthprobes"><a class="anchor" href="#healthprobes"></a>Pod Health Probes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h3>
<div class="paragraph">
<p>Liveness and Readiness probes are Kubernetes capabilities that enable teams to make their containerised applications more reliable and robust. However, if used inappropriately they can result in none of the intended benefits, and can actually make a microservice based application unstable.</p>
</div>
<div class="paragraph">
<p>The purpose of each probe is quite simple and is described well in the OpenShift documentation here. The use of each probe is best understood by examining the action that will take place if the probe is activated.</p>
</div>
<div class="paragraph">
<p><strong>Liveness</strong> : Under what circumstances is it appropriate to restart the pod?</p>
</div>
<div class="paragraph">
<p><strong>Readiness</strong> : under what circumstances should we take the pod out of the list of service endpoints so that it no longer responds to requests?</p>
</div>
<div class="paragraph">
<p>Coupled with the action of the probe is the type of test that can be performed within the pod :</p>
</div>
<div class="paragraph">
<p><strong>Http GET request</strong> : For success, a request to a specific http endpoint must result in a response between 200 and 399.</p>
</div>
<div class="paragraph">
<p><strong>Execute a command</strong> : For success, the execution of a command within the container must result in a return code of 0.</p>
</div>
<div class="paragraph">
<p><strong>TCP socket check</strong> : For success, a specific TCP socket must be successfully opened on the container.</p>
</div>
</div>
<div class="sect2">
<h3 id="creating-the-project-and-application"><a class="anchor" href="#creating-the-project-and-application"></a>Creating the project and application</h3>
<div class="paragraph">
<p>Log on to cluster as userx, password openshift</p>
</div>
<div class="paragraph">
<p>Ensure you are on the Administrator View (top level, select Administrator)</p>
</div>
<div class="paragraph">
<p><strong>The Administrator view provides you with an extended functionality interface that allows you to deep dive into the objects available to your user. The Developer view is an opinionated interface designed to ease the use of the system for developers. This workshop will have you swapping between the contexts for different tasks.</strong></p>
</div>
<div class="paragraph">
<p>Click on 'Create Project'</p>
</div>
<div class="paragraph">
<p>Name - ‘probesX’ where X is your assigned user number</p>
</div>
<div class="paragraph">
<p>Display Name - 'Probes'</p>
</div>
<div class="paragraph">
<p>Desciption - 'Liveness and readiness probes'</p>
</div>
<div class="paragraph">
<p>as shown in the image below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/healthprobes-1.png" alt="Project creation">
</div>
</div>
<div class="paragraph">
<p><strong>By default when you create a Project within OpenShift your user is given administration rights. This allows the user to create any objects that they have rights to create and to change the security and access settings for the project itself, i.e. add users as Administrators, Edit Access, Read access or disable other user&#8217;s abilities to even see the project and the objects within.</strong></p>
</div>
<div class="paragraph">
<p><strong>In the top left of the UI, where the label indicates the view mode, change the mode from Administrator to Developer and select the Topology view.</strong></p>
</div>
<div class="paragraph">
<p>Select ‘From Catalog’</p>
</div>
<div class="paragraph">
<p>Enter ‘node’ in the search box</p>
</div>
<div class="paragraph">
<p><strong>The various catalogue items present different configurations of applications that can be created. For example the node selections include a simple node.js application or node.js with a database platform that is pre-integrated and ready to use within the application. For this workshop you will use a simple node.js application.</strong></p>
</div>
<div class="paragraph">
<p>Select ‘Node.js’</p>
</div>
<div class="paragraph">
<p><strong>A wizard page will then pop up on the right hand side with details of exactly what will be created through the process.</strong></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Source-2-Image</div>
<div class="paragraph">
<p>One of the most exciting features of OpenShift from a developer&#8217;s perspective is the concept of S2I, or <strong>Source-2-Image</strong> which provides a standardised way of taking a base image, containing, for example, the framework for running a node.js application,
a source code repository, containing the code of the application that matches the framework provided in the base image, and constructing  and delivering a composite Application image to the Registry. Simply put this enables a developer to create source code for an application and OpenShift will convert that to a running application within a container with minimal effort. The process that you will use below is the Source-2-Image capability.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Click on ‘Create Application’</p>
</div>
<div class="paragraph">
<p><strong>The wizard process has a number of options that the user may elect to use. These include:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Selecting a specific version of Node to use</p>
</li>
<li>
<p>Selecting a GIT repository and choosing to use code from a specific directory within the repository.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Select the default offering for the Builder Image Version</p>
</div>
<div class="paragraph">
<p>For the GIT repository use : <a href="https://github.com/marrober/slave-node-app.git" class="bare">https://github.com/marrober/slave-node-app.git</a></p>
</div>
<div class="paragraph">
<p>In a separate browser tab go to <a href="https://github.com/marrober/slave-node-app.git" class="bare">https://github.com/marrober/slave-node-app.git</a></p>
</div>
<div class="paragraph">
<p><strong>You can see that the GIT repository at this location only has a small number of files specific to the application. There is no content specific to how the application should be built or deployed into a container.</strong></p>
</div>
<div class="paragraph">
<p>Close the github tab</p>
</div>
<div class="paragraph">
<p>Back at the OCP4.2 user interface complete the following information in the section titmed 'General'.</p>
</div>
<div class="paragraph">
<p>For the Application drop down menu select 'Create Application'.</p>
</div>
<div class="paragraph">
<p>For the Application name enter 'Slave-application'.</p>
</div>
<div class="paragraph">
<p>For the Name field enter 'node-app-slave'</p>
</div>
<div class="paragraph">
<p><strong>The application name field is used to group together multiple items under a single grouping within the topology view. The name field is used to identify the specific containerised application.</strong></p>
</div>
<div class="paragraph">
<p>Ensure the ‘Create a route to the application’ checkbox is checked.</p>
</div>
<div class="paragraph">
<p>Click Create</p>
</div>
<div class="paragraph">
<p><strong>The user interface will then change to display the Topology view. This is a pictorial representation of the various items (applications, databases etc.) that have been created from the catalogue and added to an application grouping.</strong></p>
</div>
<div class="paragraph">
<p><strong>Multiple application groupings can exist within a single project.</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="viewing-the-running-application"><a class="anchor" href="#viewing-the-running-application"></a>Viewing the running application</h3>
<div class="paragraph">
<p>Click on the Icon marked ‘Node’</p>
</div>
<div class="paragraph">
<p><strong>A side panel will appear with information on the Deployment Configuration that has just been created. The overview tab shows summary information and allows the user to scale the number of pods up and down. The resources tab shows information on the building process, the pods and the services and route to reach the application (if these have been created).</strong></p>
</div>
<div class="paragraph">
<p>Wait for the Build to finish, the Pod to change from Container Creating to Running.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Pod Colour Scheme</div>
<div class="paragraph">
<p>The colour scheme of the pods is important and conveys information about the pod health and status. The following colours are used :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Running - Dark blue</p>
</li>
<li>
<p>Not Ready - Mid blue</p>
</li>
<li>
<p>Warning - Orange</p>
</li>
<li>
<p>Failed - Red</p>
</li>
<li>
<p>Pending - light blue</p>
</li>
<li>
<p>Succeeded - Green</p>
</li>
<li>
<p>Terminating - Black</p>
</li>
<li>
<p>Unknown - Purple</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>When the build has completed the right hand side panel will shown something similar to the image below. Note that the route will be different to that which is shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/healthprobes-2.png" alt="Deployment configuration resource information">
</div>
</div>
<div class="paragraph">
<p>Click on the Tick at the bottom left of the Pod. Note that this display can also be shown by clicking on the ‘View Logs’ section on the right hand side panel.</p>
</div>
<div class="paragraph">
<p><strong>The build log will show information on the execution of the source-2-image process.</strong></p>
</div>
<div class="paragraph">
<p>Click on the arrow on the top right corner of the Pod, or click on the route URL shown in the right hand side resource details window. The application window will launch in a new browser window and should display text as shown below:</p>
</div>
<div class="paragraph">
<p><strong>Hello - this is the simple slave REST interface</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="liveness-probe"><a class="anchor" href="#liveness-probe"></a>Liveness Probe</h3>
<div class="paragraph">
<p><strong>A number of probes will be created to show the different behaviours. The first probe will be a liveness probe that will result in the restart of the pod.</strong></p>
</div>
<div class="paragraph">
<p><strong>To create the probe use the OC command line interface to execute the following command.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc set probe dc/node-app-slave --liveness --initial-delay-seconds=30 --failure-threshold=1 --period-seconds=10 --get-url=http://:8080/health</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>The above probe will create a new liveness probe with the characteristics:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Become active after 30 seconds</p>
</li>
<li>
<p>Initiated a reboot after 1 instance of a failure to respond</p>
</li>
<li>
<p>Probe the application every 10 seconds <em>Note that ordinarily a gap of 10 seconds between probes would be considered very long, but we use this time delay within the workshop to allow time for observing the behaviour of the probe.</em></p>
</li>
<li>
<p>Use the URL /health on the application at port 8080. Note that there is no need to specify a URL for the application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The command line response should be as shown below.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">deploymentconfig.apps.openshift.io/node-app-slave probes updated</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Review the liveness probe information by executing the command:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc describe dc/node-app-slave</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>The output of this command will include the following section that highlights the new liveness probe</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">Pod Template:
  Labels:	app=node-app-slave
		    deploymentconfig=node-app-slave
  Containers:
   node-app-slave:
    Image:		image-registry.openshift-image-registry.svc:5000/probes2/node-app-slave@sha256:bf377...241
    Port:		    8080/TCP
    Host Port:		0/TCP
    Liveness:		http-get http://:8080/health delay=30s timeout=1s period=10s #success=1 #failure=1
    Environment:	&lt;none&gt;
    Mounts:		    &lt;none&gt;
  Volumes:		    &lt;none&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Alternatively to view the probe in a different format use the command below:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get dc/node-app-slave -o yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Part of the output will show:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">livenessProbe:
    failureThreshold: 1
    httpGet:
        path: /health
        port: 8080
        scheme: HTTP
    initialDelaySeconds: 30
    periodSeconds: 10
    successThreshold: 1
    timeoutSeconds: 1</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>To view the above information graphically then use the following steps:</strong></p>
</div>
<div class="paragraph">
<p>Select the Topology view of the application.</p>
</div>
<div class="paragraph">
<p>Click on the pod in the centre of the screen to display the information panel on the right hand side.
From the action menu on the right hand side click <strong>Edit Deployment Configuration</strong> as shown in the image below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/healthprobes-3.png" alt="View of the health probe in the Deployment Configuration">
</div>
</div>
<div class="paragraph">
<p><strong>On the Deployment Configuration page that is displayed ensure that the YAML tab is selected and scroll down to aroundline 68 to see the YAML definition for the liveness probe. It is also possible to edit the parameters of the probe from this screen if necessary.</strong></p>
</div>
<div class="paragraph">
<p><strong>In order to execute the probe it is necessary to simulate a pod failure that will stop the application from responding to the health check. A specific REST interface on the application has been created for this purpose called /ignore.</strong></p>
</div>
<div class="sect3">
<h4 id="activation-of-the-liveness-prove"><a class="anchor" href="#activation-of-the-liveness-prove"></a>Activation of the Liveness Prove</h4>
<div class="paragraph">
<p><strong>To view the activity of the probe it is necessary to open two windows.</strong></p>
</div>
<div class="paragraph">
<p>Select the Topology view of the application.</p>
</div>
<div class="paragraph">
<p>Click on the arrow on the top right hand corner of the node icon to open the application URL in a new browser tab.</p>
</div>
<div class="paragraph">
<p>Back on the OpenShift browser tab, Click on the pod to open the details window on the right hand side and then click on the pod link on the resources tab. This will display a multi-tab window with details of the pod, select the events tab.</p>
</div>
<div class="paragraph">
<p>Switch to the application tab and put /ip on the end of the url and hit return. This will display the ip address of the pod.</p>
</div>
<div class="paragraph">
<p>Change the url to have /health on the end and hit return. This will display the amount of time that the pod has been running.</p>
</div>
<div class="paragraph">
<p>Change the url to have /ignore on the end and hit return. Quickly move to the browser tab showing the pod events and watch for the probe event.</p>
</div>
<div class="paragraph">
<p>The pod will restart after 1 failed probe event which takes up to 10 seconds depending on where the schedule is between the probe cycles. The events for the pod on the details screen will be similar to that shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/healthprobes-4.png" alt="Pod events showing activation of the liveness probe">
</div>
</div>
<div class="paragraph">
<p><strong>The events after the firing of the liveness probe are the re-pulling and starting of the container image in a new pod.</strong></p>
</div>
<div class="paragraph">
<p>Switch to the application tab and put /health on the end of the url and hit return. This will display the amount of time that the new pod has been running, which will understandably be a small number.</p>
</div>
<div class="paragraph">
<p><strong>In order to experiment with the readiness probe it is necessary to switch off the liveness probe. This can either be done by changing the deployment configuration YAML definition using the web interface or by executing the following command line:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc set probe dc/node-app-slave --liveness --remove</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="readiness-probe"><a class="anchor" href="#readiness-probe"></a>Readiness Probe</h3>
<div class="paragraph">
<p><strong>To create the probe use the OC command line interface to execute the following command.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc set probe dc/node-app-slave --readiness --initial-delay-seconds=30 --failure-threshold=3 --success-threshold=1  --period-seconds=5 --get-url=http://:8080/health</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>The above command will create a new readiness probe with the characteristics:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Become active after 30 seconds</p>
</li>
<li>
<p>Remove the pod from the service endpoint after 3 instances of a failure to respond</p>
</li>
<li>
<p>Cancel the removal of the pod and add it back to the service endpoint after 1 successful response</p>
</li>
<li>
<p>Probe the application every 5 seconds</p>
</li>
<li>
<p>Use the URL /health on the application at port 8080. Note that there is no need to specify a URL for the application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>The command line response should be as shown below</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">deploymentconfig.apps.openshift.io/node-app-slave probes updated</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Review the probe created using the commands above:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc describe dc/node-app-slave</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get dc/node-app-slave -o yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>View the state of the pod within the endpoints using the command below:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get ep/node-app-slave -o yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>The output of the above command will list the details of the service endpoint which will include information on the pod to which the health probe is attached as shown below.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">apiVersion: v1
kind: Endpoints
metadata:
  annotations:
    endpoints.kubernetes.io/last-change-trigger-time: 2019-11-26T16:04:50Z
  creationTimestamp: 2019-11-26T09:37:12Z
  labels:
    app: node-app-slave
    app.kubernetes.io/component: node-app-slave
    app.kubernetes.io/instance: node-app-slave
    app.kubernetes.io/name: nodejs
    app.kubernetes.io/part-of: master-slave
    app.openshift.io/runtime: nodejs
    app.openshift.io/runtime-version: "10"
  name: node-app-slave
  namespace: probes1
  resourceVersion: "1172051"
  selfLink: /api/v1/namespaces/probes1/endpoints/node-app-slave
  uid: 534139aa-1030-11ea-af1c-024039909e8a
subsets:
- addresses:
  - ip: 10.128.2.145
    nodeName: ip-10-0-136-74.eu-central-1.compute.internal
    targetRef:
      kind: Pod
      name: node-app-slave-5-hwj89
      namespace: probes1
      resourceVersion: "1172049"
      uid: ad6cc0e5-1043-11ea-af1c-024039909e8a
  ports:
  - name: 8080-tcp
    port: 8080
    protocol: TCP</code></pre>
</div>
</div>
<div class="paragraph">
<p>The lies of interest above are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">subsets:
- addresses:
  - ip: 10.128.2.145</code></pre>
</div>
</div>
<div class="paragraph">
<p>This shows that the address is currently part of the endpoint (it will participate in servicing requests) prior to the readiness probe activation.</p>
</div>
<div class="sect3">
<h4 id="activation-of-the-readiness-probe"><a class="anchor" href="#activation-of-the-readiness-probe"></a>Activation of the Readiness Probe</h4>
<div class="paragraph">
<p>Select the Topology view of the application.</p>
</div>
<div class="paragraph">
<p>Click on the arrow on the top right hand corner of the node icon to open the application URL in a new browser tab (unless you already have one open).</p>
</div>
<div class="paragraph">
<p>On the OpenShift browser tab, click on the pod to open the details window on the right hand side and then click on the pod link on the resources tab. This will display a multi-tab window with details of the pod, select the events tab.</p>
</div>
<div class="paragraph">
<p>Switch to the application tab and put /ip on the end of the url and hit return. This will display the ip address of the pod.</p>
</div>
<div class="paragraph">
<p>Change the url to have /health on the end and hit return. This will display the amount of time that the pod has been running.</p>
</div>
<div class="paragraph">
<p>Change the url to have /ignore on the end and hit return. Quickly move to the browser tab showing the pod events and watch for the probe event.</p>
</div>
<div class="paragraph">
<p>The pod events will show a screen similar to that which is shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/healthprobes-5.png" alt="Pod events showing activation of the readiness probe">
</div>
</div>
<div class="paragraph">
<p><strong>Note that you will see the count of the readiness 'events' incrementing every 5 seconds.</strong></p>
</div>
<div class="paragraph">
<p><strong>You will also see that the events continue counting up since readiness probes do not stop firing just because the pod has been removed from the endpoint list. It is important that they continue to probe since the conditions may change and it may be appropriate to add the pod back into the endpoint list.</strong></p>
</div>
<div class="paragraph">
<p>View the state of the pod within the endpoints using the command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get ep/node-app-slave -o yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>The output of the above command will list the details of the service endpoint which will include information on the pod to which the health probe is attached as shown below.</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">subsets:
- notReadyAddresses:
  - ip: 10.128.2.145</code></pre>
</div>
</div>
<div class="paragraph">
<p>The subset of the command output shown above indicates that the address is now listed as ‘not ready’ and is not currently part of the endpoint.</p>
</div>
<div class="paragraph">
<p><strong>Under production use conditions for the application may change and the pod may recover from the inability to respond to the readiness probe. If this happens then it will be added back to the endpoint list.</strong></p>
</div>
<div class="paragraph">
<p><strong>To simulate this the Node application has a REST endpoint at /restore. Since the pod is currently not receiving communications from outside the cluster the call to the restore endpoint is done from within the pod command window.</strong></p>
</div>
<div class="paragraph">
<p>Switch to the OpenShift browser window that was showing the pod events.</p>
</div>
<div class="paragraph">
<p><strong>Note that you will see a large number of pod readiness probe failures while you were reading the notes.</strong></p>
</div>
<div class="paragraph">
<p>Select the terminal window tab and enter the command :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -k localhost:8080/restore</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>You should see a response similar to that shown below (with a different IP address):</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">"10.128.2.146 restore switch activated"sh-4.2$</code></pre>
</div>
</div>
<div class="paragraph">
<p>View the state of the pod within the endpoints using the command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get ep/node-app-slave -o yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>You should see that the line of interest, previously shown above, has changed back to that shown below:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">subsets:
- addresses:
  - ip: &lt;ip address of the pod&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>On the OpenShift browser page switch back to the events tab and you should see that the readiness probe failure count is no longer increasing.</strong></p>
</div>
<div class="paragraph">
<p>Finally, switch to the application browser page and change the URL to end in /health. You should see that the application has been running for some time (compared to the liveness probe that showed a restart had taken place) and it should be responding successfully to the health probe.</p>
</div>
</div>
<div class="sect3">
<h4 id="cleaning-up"><a class="anchor" href="#cleaning-up"></a>Cleaning up</h4>
<div class="paragraph">
<p>From the OpenShift browser window click on 'Advanced' and then 'Projects' on the left hand side menu.</p>
</div>
<div class="paragraph">
<p>In the triple dot menu next to your own project (ProbesX) select ‘Delete Project’
Type ‘ProbesX’ (where X is your user number) such that the Delete button turns red and is active.</p>
</div>
<div class="paragraph">
<p>Press Delete to remove the project.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="webconsole"><a class="anchor" href="#webconsole"></a>Camel K on Openshift</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="introduction-2"><a class="anchor" href="#introduction-2"></a>Introduction</h3>
<div class="paragraph">
<p>Apache Camel K is a lightweight integration framework built from Apache Camel that runs natively on Kubernetes and is specifically designed for serverless and microservice architectures.</p>
</div>
<div class="paragraph">
<p>Users of Camel K can instantly run integration code written in Camel DSL on their preferred cloud (Kubernetes or OpenShift).</p>
</div>
<div class="paragraph">
<p>We are going to use a new project to create our Camel K integrations</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you are not already logged on go to the UI URL and login as userx (x is the number provided to you) and password openshift. Open another tab in the browser and go to the terminal URL provided and again logon as userx with password openshift
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="create-a-new-project"><a class="anchor" href="#create-a-new-project"></a>Create a new project</h3>
<div class="paragraph">
<p>In the browser based terminal window, create a new project called 'camelk-userx' where 'x' is your allocated user number</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc project camelk-userx</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="camel-k-and-the-operator-lifecycle-manager"><a class="anchor" href="#camel-k-and-the-operator-lifecycle-manager"></a>Camel K and the Operator Lifecycle Manager</h3>
<div class="sidebarblock">
<div class="content">
<div class="title">Camel K and the Operator Lifecycle Manager</div>
<div class="paragraph">
<p>Camel K uses the Operator Lifecycle manager, this means that new Custom Resource Definitions (CRDs) will be added to Openshift. These CRDs will extend the Openshift data model and allow Camel K to be managed using the standard ‘oc’ command. Installing operators requires a higher cluster privilage so the presenter will demonstrate the installation of the operator shortly.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Before installing Camel K make sure that the CRDs do not exist.</p>
</div>
<div class="paragraph">
<p>In the terminal window type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc whoami</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the response from the command is not your user name. Type ‘oc login’ and enter your username (userx) and password ‘openshift’. Rather than using your username and password, you could also use the recommended solution in the web console overview.</p>
</div>
<div class="paragraph">
<p>In the terminal browser window, type:-</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get integrations
oc get integrationplatforms</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both of these commands should return an <strong>error</strong></p>
</div>
<div class="paragraph">
<p><strong>'ADMIN only - Presenter demonstrates'</strong></p>
</div>
<div class="paragraph">
<p>Explain both of the above CRDs and what they are used for in Camel K</p>
</div>
<div class="paragraph">
<p>Install Camel K:</p>
</div>
<div class="paragraph">
<p>If you are not already logged on go to the UI URL and login as ‘opentlc-mgr’ (Don’t forget to explain that this is a cluster admin function) and the admin password</p>
</div>
<div class="paragraph">
<p>Make sure you are on the ‘Administration View’ in the console</p>
</div>
<div class="paragraph">
<p>Go to 'Operators/Operator Hub'</p>
</div>
<div class="paragraph">
<p>Search for ‘camel k’</p>
</div>
<div class="paragraph">
<p>Install for all 'namespaces' in the cluster</p>
</div>
<div class="paragraph">
<p>Wait until the ‘Camel K Operator’ is shown as installed on the Operators/Installed Operators window</p>
</div>
<div class="paragraph">
<p><strong>'ADMIN only - finished'</strong></p>
</div>
<div class="paragraph">
<p>In the browser terminal window
Type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get integrations
oc get integrationplatforms</code></pre>
</div>
</div>
<div class="paragraph">
<p>This time, both commands should return “no resources found”</p>
</div>
<div class="paragraph">
<p>Download the 'Camel K' examples using the browser terminal :-</p>
</div>
</div>
<div class="sect2">
<h3 id="download-and-configure-your-environment"><a class="anchor" href="#download-and-configure-your-environment"></a>Download and configure your environment</h3>
<div class="paragraph">
<p>Create a directory to download the examples</p>
</div>
<div class="paragraph">
<p>type 'mkdir camel'</p>
</div>
<div class="paragraph">
<p>type 'cd camel'</p>
</div>
<div class="paragraph">
<p>Download the Camel K examples</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">wget https://github.com/pprosser-redhat/devex-camelk/raw/master/camelexamples/camel-k-examples-1.0.0-M3.tar.gz</code></pre>
</div>
</div>
<div class="paragraph">
<p>Uncompress the file</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">tar -xf camel-k-examples-1.0.0-M3.tar.gz</code></pre>
</div>
</div>
<div class="paragraph">
<p>To allow a developer to easily interact with an Openshift cluster, Camel K has it&#8217;s own command line interface. Download the 'Camel K cli' :-</p>
</div>
<div class="paragraph">
<p>In the same directory, type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">wget https://github.com/pprosser-redhat/devex-camelk/raw/master/camelkcli/camel-k-client-1.0.0-M3-linux-64bit.tar.gz</code></pre>
</div>
</div>
<div class="paragraph">
<p>Uncompress the file</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">tar -xf camel-k-client-1.0.0-M3-linux-64bit.tar.gz</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before we can create an integration, we need to add a Camel K 'IntegrationPlatform'.</p>
</div>
<div class="paragraph">
<p>In the terminal window, type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc apply -f   https://raw.githubusercontent.com/pprosser-redhat/devex-camelk/master/camelkconfig/integrationplatform.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>You should now have all the pieces you need to start creating and deploying lightweight Camel Integrations to Openshift.</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="deploy-a-camel-k-interation"><a class="anchor" href="#deploy-a-camel-k-interation"></a>Deploy a Camel K Interation</h3>
<div class="paragraph">
<p>Firstly, let’s start by deploying a simple integration, type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./kamel run simple.groovy</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The first time you deploy an Integration, it will take a few minutes. The operator manages all dependencies required by the Integration and downloads these from the Red Hat repository on demand. Once downloaded, the operator caches dependancies therefore subsequent deployments are significantly quicker.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can see what’s going on :-</p>
</div>
<div class="paragraph">
<p>If you go to the console UI in the Browser, make sure you are switched to 'Developer view'</p>
</div>
<div class="paragraph">
<p>Click on 'Topology'</p>
</div>
<div class="paragraph">
<p>Click on 'Simple' (this is your integration), and you can see what’s going on.</p>
</div>
<div class="paragraph">
<p>Once the pod has a dark blue ring around it, it is running</p>
</div>
<div class="paragraph">
<p>Click on 'Resources'</p>
</div>
<div class="paragraph">
<p>Click on 'Pods &#8594; simple-xxxxxxxx' (xxxxxxx is randomly generated)</p>
</div>
<div class="paragraph">
<p>Click on 'Logs' to see the output from the integration</p>
</div>
<div class="paragraph">
<p>The integration is a simple timer that triggers every 1 second and writes to the log file.</p>
</div>
<div class="paragraph">
<p>In the Terminal Browser window type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc get integrations</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should now see an integration called 'simple' in the list.</p>
</div>
<div class="paragraph">
<p>In the Terminal browser window type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"> oc describe integration simple</code></pre>
</div>
</div>
<div class="paragraph">
<p>You’ll see the “Integration” CRD definition that includes the integration defined as groovy code.</p>
</div>
<div class="paragraph">
<p>Let’s make a change to the integration</p>
</div>
<div class="paragraph">
<p>In the browser terminal window</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">vi simple.groovy</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see the text - 'Hello Camel K from ${routeId}'</p>
</div>
<div class="paragraph">
<p>Change the text e.g. 'Hello Camel K from ${routeId}. Added some more text'</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To change the text, use the arrow gets to move to the text you want to change, press 'i', and type in the text. To save, press 'esc' and type ':wq' followed by 'enter'
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now, you need to deploy this integration to Openshift again to test</p>
</div>
<div class="paragraph">
<p>Type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./kamel run simple.groovy</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are quick enough (you need to be really quick!), you’ll see the integration doing a rolling deployment</p>
</div>
<div class="paragraph">
<p>Look at the log file again (as above) to see if the change has been deployed</p>
</div>
</div>
<div class="sect2">
<h3 id="deploy-camel-k-in-developer-mode"><a class="anchor" href="#deploy-camel-k-in-developer-mode"></a>Deploy Camel K in Developer mode</h3>
<div class="paragraph">
<p><strong>While the process of redeploying is simple, it isn’t very developer friendly. The 'kamel' cli has a developer friendly “hot deploy” mode that makes this experience much better</strong></p>
</div>
<div class="paragraph">
<p>Let&#8217;s try it out :-</p>
</div>
<div class="paragraph">
<p>Delete the integration :-
There are 2 ways you can do this in the Terminal Browser window (your choice) :-</p>
</div>
<div class="paragraph">
<p>Use the “kamel” cli</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./kamel delete simple</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or</p>
</div>
<div class="paragraph">
<p>Use the Openshift cli</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc delete integration simple</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is the great thing about CRDs, you can use the normal Openshift cli to managed the custom data model (integrations in this case)
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Lets deploy the integration in developer mode, type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./kamel run simple.groovy --dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see the deployment phases logged on the screen, followed by the log outputting automatically from the integration pod, useful for a developer to see what’s going on</p>
</div>
<div class="paragraph">
<p>For the next exercise, you will need 2 terminal windows.</p>
</div>
<div class="paragraph">
<p>Copy the URL for the “browser terminal” and paste into a new browser tab</p>
</div>
<div class="paragraph">
<p>It should look something like :-
<a href="https://xxxxxxxxxxxxx/terminal/session/1" class="bare">https://xxxxxxxxxxxxx/terminal/session/1</a></p>
</div>
<div class="paragraph">
<p><strong>You will notice that the terminal window is also outputting the log, you need to create a new terminal session</strong></p>
</div>
<div class="paragraph">
<p>Change the url to a new session number e.g.
<a href="https://xxxxxxxxxxxxx/terminal/session/2" class="bare">https://xxxxxxxxxxxxx/terminal/session/2</a></p>
</div>
<div class="paragraph">
<p>In the new terminal, make sure you go back to the camel directory - if you followed the instructions, it will be called 'camel'</p>
</div>
<div class="paragraph">
<p>Make another change to the text in “simple.groovy” by following the same instructions above</p>
</div>
<div class="paragraph">
<p>Once you have saved the changes, go back to the browser terminal tab outputting the log.</p>
</div>
<div class="paragraph">
<p>You should see that the changes have been automatically applied to the running integration, without the need to redeploy</p>
</div>
<div class="paragraph">
<p><strong>That’s a much better way of round trip development of integrations…</strong></p>
</div>
<div class="paragraph">
<p>Go back to the browser terminal that’s outputting the log, press ‘ctrl c’</p>
</div>
<div class="paragraph">
<p>Look at the Topology view in the Openshift console(or oc get integrations)</p>
</div>
<div class="paragraph">
<p>The integration should have been deleted -</p>
</div>
<div class="paragraph">
<p><strong>Just like a developer would see by pressing 'ctrl c' on a Java application running on their laptop</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="optional-labs"><a class="anchor" href="#optional-labs"></a>Optional labs</h3>
<div class="paragraph">
<p>Feel free to take a look at some of the other examples</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Instructions on how to run the integrations are in the integration source code
E.g. ./kamel run --name=rest-with-restlet --dependency=camel-rest --dependency=camel-restlet RestWithRestlet.java
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The example above demonstrates Camel K deploying a Java based Camel Route that exposes a Restful service via an Openshift route - the Camel K operator does all the hard work for you</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
some of the examples might take a little longer to deploy as the operator will need to download more dependencies
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To test the rest api, you need to know what the Openshift Route is</p>
</div>
<div class="paragraph">
<p>In the Developer UI, go back to the Topology view, and click on “rest-with-restlet” application</p>
</div>
<div class="paragraph">
<p>Click on resources, and you will see the http route at the bottom of the page</p>
</div>
<div class="paragraph">
<p>Click on the http link</p>
</div>
<div class="paragraph">
<p>You will get an error as the integration will only response to /hello. Append ‘/hello’ to the URI
Now you should see a response</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0.0<br>
Last updated 2019-12-02 12:07:13 UTC
</div>
</div>
</body>
</html>